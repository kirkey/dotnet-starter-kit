@if (_isVisible && _errorDetails != null)
{
    <div class="global-error-container">
        <MudPaper Elevation="8" Class="pa-4 error-paper">
            <div class="d-flex align-center justify-space-between mb-2">
                <div class="d-flex align-center">
                    <MudIcon Icon="@Icons.Material.Filled.Error" Color="Color.Error" Class="mr-2" />
                    <MudText Typo="Typo.h6" Color="Color.Error">Error Occurred</MudText>
                </div>
                <MudIconButton Icon="@Icons.Material.Filled.Close" 
                               Size="Size.Small" 
                               OnClick="Dismiss" 
                               Color="Color.Default" />
            </div>
            
            <MudText Typo="Typo.body1" Class="mb-2">
                <strong>@_errorDetails.Message</strong>
            </MudText>

            @if (_errorDetails.StatusCode.HasValue)
            {
                <MudChip T="string" Size="Size.Small" Color="Color.Error" Class="mb-2">
                    Status Code: @_errorDetails.StatusCode
                </MudChip>
            }

            @if (!string.IsNullOrWhiteSpace(_errorDetails.Details))
            {
                <MudExpansionPanels Elevation="0" Class="mt-2">
                    <MudExpansionPanel Text="View Technical Details">
                        <div class="error-details">
                            <MudText Typo="Typo.body2">@_errorDetails.Details</MudText>
                        </div>
                    </MudExpansionPanel>
                </MudExpansionPanels>
            }

            <div class="d-flex gap-2 mt-4">
                <MudButton Variant="Variant.Filled" 
                           Color="Color.Primary" 
                           StartIcon="@Icons.Material.Filled.Refresh"
                           OnClick="Reload">
                    Reload Page
                </MudButton>
                <MudButton Variant="Variant.Outlined" 
                           Color="Color.Default"
                           StartIcon="@Icons.Material.Filled.Close"
                           OnClick="Dismiss">
                    Dismiss
                </MudButton>
            </div>
        </MudPaper>
    </div>
}

<style>
    .global-error-container {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 9999;
        max-width: 600px;
        width: 90%;
        animation: slideUp 0.3s ease-out;
    }

    .error-paper {
        border-left: 4px solid #f44336;
        background-color: #fff;
    }

    .error-details {
        white-space: pre-wrap;
        word-wrap: break-word;
        font-family: 'Courier New', monospace;
        background-color: #f5f5f5;
        padding: 12px;
        border-radius: 4px;
        max-height: 300px;
        overflow-y: auto;
        font-size: 0.875rem;
    }

    @@keyframes slideUp {
        from {
            transform: translateX(-50%) translateY(100%);
            opacity: 0;
        }
        to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
    }

    @@media (prefers-color-scheme: dark) {
        .error-paper {
            background-color: #1e1e1e;
        }
        
        .error-details {
            background-color: #2d2d2d;
            color: #e0e0e0;
        }
    }
</style>

