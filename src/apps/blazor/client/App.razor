<CascadingAuthenticationState>
    <ErrorBoundary>
        <ChildContent>
            <Router AppAssembly="@typeof(Program).Assembly">
                <Found Context="routeData">
                    <AuthorizeRouteView RouteData="@routeData" DefaultLayout="@typeof(BaseLayout)">
                        <NotAuthorized>
                            @if (@context.User.Identity?.IsAuthenticated is true)
                            {
                                <p>You are not authorized to be here.</p>
                            }
                            else
                            {
                                <Login />
                            }
                        </NotAuthorized>
                    </AuthorizeRouteView>
                </Found>
                <NotFound>
                    <LayoutView Layout="@typeof(NotFound)">
                        <NotFound/>
                    </LayoutView>
                </NotFound>
            </Router>
        </ChildContent>
        <ErrorContent>
            <MudPaper Class="pa-6" Elevation="3">
                <MudText Typo="Typo.h5" Color="Color.Error">An unexpected error occurred.</MudText>
                <MudButton OnClick="@(() => Navigation.NavigateTo(Navigation.Uri, forceLoad: true))" StartIcon="@Icons.Material.Filled.Refresh">Reload</MudButton>
            </MudPaper>
        </ErrorContent>
    </ErrorBoundary>
</CascadingAuthenticationState>