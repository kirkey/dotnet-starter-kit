<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.PersonAdd" Class="mr-1" />
            Assign Put Away Task
        </MudText>
    </TitleContent>
    <DialogContent>
        @if (_loading)
        {
            <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
        }
        else if (_putAwayTask != null)
        {
            <MudAlert Severity="Severity.Info" Class="mb-4">
                Assigning put-away task <strong>@_putAwayTask.TaskNumber</strong> with 
                <strong>@_putAwayTask.TotalLines</strong> items to a warehouse worker.
            </MudAlert>

            <MudGrid>
                <MudItem xs="12">
                    <MudPaper Elevation="@_preference.Elevation" Class="pa-3 mb-3">
                        <MudText Typo="Typo.subtitle2" Class="mb-2">Put Away Task Summary</MudText>
                        <MudSimpleTable Dense="true" Hover="true">
                            <tbody>
                                <tr>
                                    <td><strong>Task #:</strong></td>
                                    <td>@_putAwayTask.TaskNumber</td>
                                </tr>
                                <tr>
                                    <td><strong>Warehouse:</strong></td>
                                    <td>@_putAwayTask.WarehouseId</td>
                                </tr>
                                <tr>
                                    <td><strong>Strategy:</strong></td>
                                    <td>@_putAwayTask.PutAwayStrategy</td>
                                </tr>
                                <tr>
                                    <td><strong>Priority:</strong></td>
                                    <td>@_putAwayTask.Priority</td>
                                </tr>
                                <tr>
                                    <td><strong>Total Items:</strong></td>
                                    <td>@_putAwayTask.TotalLines</td>
                                </tr>
                                @if (_putAwayTask.GoodsReceiptId.HasValue)
                                {
                                    <tr>
                                        <td><strong>Goods Receipt:</strong></td>
                                        <td>@_putAwayTask.GoodsReceiptId</td>
                                    </tr>
                                }
                            </tbody>
                        </MudSimpleTable>
                    </MudPaper>
                </MudItem>

                <MudItem xs="12">
                    <MudTextField @bind-Value="_assignedTo" 
                                  Label="Assign To (Worker Name)" 
                                  Required="true"
                                  RequiredError="Please specify who this put-away task should be assigned to"
                                  MaxLength="100"
                                  Counter="100"
                                  Immediate="true"
                                  Variant="Variant.Filled"
                                  HelperText="Enter the name or ID of the warehouse worker (max 100 characters)" />
                </MudItem>
            </MudGrid>

            @if (!string.IsNullOrEmpty(_errorMessage))
            {
                <MudAlert Severity="Severity.Error" Class="mt-3">@_errorMessage</MudAlert>
            }
        }
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@(() => Cancel())" Variant="Variant.Filled">Cancel</MudButton>
        <MudButton OnClick="@(() => Assign())" 
                   Color="Color.Primary" 
                   Variant="Variant.Filled" 
                   Disabled="@(_assigning || string.IsNullOrWhiteSpace(_assignedTo))">
            @if (_assigning)
            {
                <MudProgressCircular Class="mr-2" Size="Size.Small" Indeterminate="true" />
            }
            Assign Put Away Task
        </MudButton>
    </DialogActions>
</MudDialog>

