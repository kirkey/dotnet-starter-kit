<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Help" Class="mr-2" /> Posting Batches Help
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudTabs Elevation="0" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-4">
            <MudTabPanel Text="Overview">
                <MudText Typo="Typo.body1" Class="mb-4">
                    Posting Batches group related journal entries together for batch processing and approval workflows.
                    This enables efficient review, approval, and posting of multiple transactions at once.
                </MudText>
                <MudText Typo="Typo.subtitle1" Class="mb-2"><b>Key Features:</b></MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.BatchPrediction">Group journal entries by source module or date</MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Approval">Multi-level approval workflow support</MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.PostAdd">Batch posting to the General Ledger</MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Undo">Reverse posted batches when corrections are needed</MudListItem>
                </MudList>
            </MudTabPanel>

            <MudTabPanel Text="Workflow">
                <MudText Typo="Typo.subtitle1" Class="mb-2"><b>Batch Lifecycle:</b></MudText>
                <MudTimeline TimelineOrientation="TimelineOrientation.Vertical" TimelinePosition="TimelinePosition.Start">
                    <MudTimelineItem Color="Color.Default" Variant="Variant.Filled">
                        <ItemContent>
                            <MudText Typo="Typo.subtitle2"><b>Draft</b></MudText>
                            <MudText Typo="Typo.body2">Create and edit batch details and add journal entries.</MudText>
                        </ItemContent>
                    </MudTimelineItem>
                    <MudTimelineItem Color="Color.Info" Variant="Variant.Filled">
                        <ItemContent>
                            <MudText Typo="Typo.subtitle2"><b>Submitted</b></MudText>
                            <MudText Typo="Typo.body2">Batch is submitted for approval. No further edits allowed.</MudText>
                        </ItemContent>
                    </MudTimelineItem>
                    <MudTimelineItem Color="Color.Success" Variant="Variant.Filled">
                        <ItemContent>
                            <MudText Typo="Typo.subtitle2"><b>Approved</b></MudText>
                            <MudText Typo="Typo.body2">Approved by authorized personnel. Ready for posting.</MudText>
                        </ItemContent>
                    </MudTimelineItem>
                    <MudTimelineItem Color="Color.Primary" Variant="Variant.Filled">
                        <ItemContent>
                            <MudText Typo="Typo.subtitle2"><b>Posted</b></MudText>
                            <MudText Typo="Typo.body2">Entries posted to General Ledger. Can be reversed if needed.</MudText>
                        </ItemContent>
                    </MudTimelineItem>
                    <MudTimelineItem Color="Color.Error" Variant="Variant.Filled">
                        <ItemContent>
                            <MudText Typo="Typo.subtitle2"><b>Rejected</b></MudText>
                            <MudText Typo="Typo.body2">Batch returned for corrections. Can be edited and resubmitted.</MudText>
                        </ItemContent>
                    </MudTimelineItem>
                </MudTimeline>
            </MudTabPanel>

            <MudTabPanel Text="Actions">
                <MudSimpleTable Dense="true" Hover="true" Bordered="true" Striped="true">
                    <thead>
                        <tr>
                            <th>Action</th>
                            <th>From Status</th>
                            <th>To Status</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><MudIcon Icon="@Icons.Material.Filled.Send" Size="Size.Small" /> Submit</td>
                            <td>Draft</td>
                            <td>Submitted</td>
                            <td>Send batch for approval review</td>
                        </tr>
                        <tr>
                            <td><MudIcon Icon="@Icons.Material.Filled.CheckCircle" Size="Size.Small" Color="Color.Success" /> Approve</td>
                            <td>Submitted</td>
                            <td>Approved</td>
                            <td>Authorize batch for posting</td>
                        </tr>
                        <tr>
                            <td><MudIcon Icon="@Icons.Material.Filled.Cancel" Size="Size.Small" Color="Color.Error" /> Reject</td>
                            <td>Submitted</td>
                            <td>Rejected</td>
                            <td>Return batch for corrections</td>
                        </tr>
                        <tr>
                            <td><MudIcon Icon="@Icons.Material.Filled.PlayArrow" Size="Size.Small" Color="Color.Primary" /> Post</td>
                            <td>Approved</td>
                            <td>Posted</td>
                            <td>Post entries to General Ledger</td>
                        </tr>
                        <tr>
                            <td><MudIcon Icon="@Icons.Material.Filled.Undo" Size="Size.Small" Color="Color.Warning" /> Reverse</td>
                            <td>Posted</td>
                            <td>Reversed</td>
                            <td>Generate reversing entries</td>
                        </tr>
                    </tbody>
                </MudSimpleTable>
            </MudTabPanel>

            <MudTabPanel Text="Best Practices">
                <MudText Typo="Typo.subtitle1" Class="mb-2"><b>Recommendations:</b></MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.DateRange">
                        <b>Group by Period:</b> Create separate batches for each accounting period to simplify reconciliation.
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Source">
                        <b>Use Source Modules:</b> Tag batches with the originating module (AP, AR, Payroll) for traceability.
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Balance">
                        <b>Verify Balances:</b> Ensure debits equal credits before submitting for approval.
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Description">
                        <b>Add Notes:</b> Include descriptive notes explaining the purpose of the batch.
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.History">
                        <b>Review History:</b> Check the audit trail before approving or reversing batches.
                    </MudListItem>
                </MudList>
            </MudTabPanel>
        </MudTabs>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@(() => MudDialog.Close())" Variant="Variant.Filled" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = default!;

    private void Close() => MudDialog.Close();
}
