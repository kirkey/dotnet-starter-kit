@namespace FSH.Starter.Blazor.Client.Pages.Accounting.Checks

<MudDialog>
    <DialogContent>
        <MudStack Spacing="3">
            <MudText Typo="Typo.h6">Check Management Help</MudText>

            <MudExpansionPanels Elevation="@_preference.Elevation">
                <MudExpansionPanel Text="What is Check Management?" Icon="@Icons.Material.Filled.MenuBook">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Understanding Check Processing</MudText>
                        <MudText Typo="Typo.body2">
                            Check management is the process of issuing, tracking, and reconciling checks for vendor payments, employee expenses, and other cash disbursements. 
                            It ensures proper controls, accurate records, and fraud prevention.
                        </MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Check Lifecycle:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                1. <strong>Available:</strong> New check stock received and recorded<br/>
                                2. <strong>Issued:</strong> Check written and sent to payee<br/>
                                3. <strong>Cleared:</strong> Check deposited by payee and cleared bank<br/>
                                4. <strong>Void:</strong> Check cancelled (errors, duplicates)<br/>
                                5. <strong>Stale:</strong> Uncashed check older than 6 months<br/>
                                6. <strong>Stop Payment:</strong> Payment halted at bank request
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Info" Dense="true">
                            <strong>Best Practice:</strong> Track all checks from issue through clearing for complete audit trail.
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Check Statuses & Lifecycle" Icon="@Icons.Material.Filled.Timeline">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Understanding Check Status Workflow</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Available:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ New checks added to system<br/>
                                â€¢ Sequential numbering maintained<br/>
                                â€¢ Ready to be issued<br/>
                                â€¢ No cash impact yet
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Issued:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ Check has been written with amount, payee, and date<br/>
                                â€¢ Cash reserved (holds amount on balance sheet)<br/>
                                â€¢ Typically occurs on or before check date<br/>
                                â€¢ Can be printed or handwritten<br/>
                                â€¢ Track delivery to payee
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Cleared:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ Payee deposited check at their bank<br/>
                                â€¢ Check cleared through banking system<br/>
                                â€¢ Appears on your bank statement<br/>
                                â€¢ Cash impact finalized<br/>
                                â€¢ Matched to payment in accounts payable
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Void:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ Check cancelled and not used<br/>
                                â€¢ Reasons: Errors, duplicates, corrections<br/>
                                â€¢ Cash hold released<br/>
                                â€¢ Physically voided (marked, destroyed)<br/>
                                â€¢ Creates audit trail for missing checks
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Stale:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ Check uncashed for more than 6 months<br/>
                                â€¢ Bank may refuse to honor stale check<br/>
                                â€¢ Need to contact payee and reissue<br/>
                                â€¢ Write-off to income if payee can't be found<br/>
                                â€¢ Subject to escheatment laws (unclaimed property)
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Stop Payment:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ Bank instructed not to honor check<br/>
                                â€¢ Initiated by check issuer<br/>
                                â€¢ Reasons: Lost check, unauthorized payment, error<br/>
                                â€¢ Bank charges fee (~$25-$35)<br/>
                                â€¢ Does not reverse accounting entry automatically
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Warning" Dense="true">
                            <strong>Important:</strong> Stale-dated checks create liability issues - follow up on uncashed checks!
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Issuing Checks" Icon="@Icons.Material.Filled.Info">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">How to Issue a Check</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Check Issuance Process:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                1. Select check from Available status<br/>
                                2. Click <strong>"Issue Check"</strong> action<br/>
                                3. Enter <strong>Check Date</strong> (date check will be dated)<br/>
                                4. Enter <strong>Payee Name</strong> (who check is for)<br/>
                                5. Enter <strong>Amount</strong> in words and numbers<br/>
                                6. Select <strong>Bank Account</strong> (which account to draw from)<br/>
                                7. Enter <strong>Reference</strong> (invoice #, bill #, etc.)<br/>
                                8. Add <strong>Memo</strong> (what check is for)<br/>
                                9. Select <strong>Payee Address</strong> (for mailing)<br/>
                                10. Click <strong>"Issue"</strong> to finalize<br/>
                                11. Print check (or it's handwritten)<br/>
                                12. Sign check (authorized signers only)
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>What to Check Before Issuing:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                âœ“ Amount matches supporting document (bill, invoice, etc.)<br/>
                                âœ“ Payee name is correct (no typos!)<br/>
                                âœ“ Bank account correct (right company, right location)<br/>
                                âœ“ Check date is reasonable (not past-dated or future-dated)<br/>
                                âœ“ Authorization/approval obtained if required<br/>
                                âœ“ Check number is sequential (no gaps)<br/>
                                âœ“ Both authorized signers available for signing
                            </MudText>
                        </div>

                        <MudText Typo="Typo.body2" Class="mt-3">
                            <strong>Journal Entry (When Issued):</strong>
                        </MudText>
                        <MudText Typo="Typo.caption" Style="font-family: monospace; background: #f5f5f5; padding: 10px; border-radius: 4px;">
                            Dr. Accounts Payable (or Expense)   $1,000<br/>
                            &nbsp;&nbsp;&nbsp;&nbsp;Cr. Cash/Bank Account            $1,000
                        </MudText>

                        <MudAlert Severity="Severity.Error" Dense="true">
                            <strong>Critical:</strong> NEVER issue checks without proper authorization and supporting documentation!
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Voiding Checks" Icon="@Icons.Material.Filled.Info">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">How to Void a Check</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>When to Void a Check:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ <strong>Issued in Error:</strong> Wrong amount, wrong payee<br/>
                                â€¢ <strong>Duplicate Payment:</strong> Paid same bill twice<br/>
                                â€¢ <strong>Incorrect Information:</strong> Address wrong, name misspelled<br/>
                                â€¢ <strong>Stale or Lost:</strong> Check won't be used
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Void Check Process:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                1. Locate check in Available or Issued status<br/>
                                2. Click <strong>"Void Check"</strong> action<br/>
                                3. Enter <strong>Reason</strong> (document why voiding)<br/>
                                4. Click <strong>"Void"</strong> to confirm<br/>
                                5. Physically void the check (mark "VOID" across face)<br/>
                                6. Keep voided check for audit trail
                            </MudText>
                        </div>

                        <MudText Typo="Typo.body2" Class="mt-3">
                            <strong>Journal Entry (When Voided):</strong>
                        </MudText>
                        <MudText Typo="Typo.caption" Style="font-family: monospace; background: #f5f5f5; padding: 10px; border-radius: 4px;">
                            Dr. Cash/Bank Account              $1,000<br/>
                            &nbsp;&nbsp;&nbsp;&nbsp;Cr. Accounts Payable (or Expense)  $1,000
                        </MudText>

                        <MudAlert Severity="Severity.Info" Dense="true">
                            <strong>Important:</strong> Voiding reverses the cash impact. Handle voided checks separately in reconciliation.
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Clearing Checks" Icon="@Icons.Material.Filled.Info">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Recording Check Clearance</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>What Happens When Check Clears:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ Payee deposited the check<br/>
                                â€¢ Check appeared on bank statement<br/>
                                â€¢ Funds withdrawn from bank account<br/>
                                â€¢ Payment is now confirmed<br/>
                                â€¢ Status updated to "Cleared"
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Marking Check as Cleared:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                1. Receive monthly bank statement<br/>
                                2. Locate check on statement<br/>
                                3. Match to issued check in system<br/>
                                4. Click <strong>"Clear Check"</strong> action<br/>
                                5. Enter <strong>Clear Date</strong> (date on bank statement)<br/>
                                6. Optionally add <strong>Notes</strong><br/>
                                7. Click <strong>"Clear"</strong> to confirm
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>During Bank Reconciliation:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ Outstanding checks (issued but not cleared) = deduction from bank balance<br/>
                                â€¢ Cleared checks = remove from outstanding list<br/>
                                â€¢ No accounting entry needed to clear checks<br/>
                                â€¢ Just update status for tracking
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Info" Dense="true">
                            <strong>Tip:</strong> Reconcile checks monthly to find discrepancies early.
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Stopping Payments" Icon="@Icons.Material.Filled.SwapHoriz">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">How to Stop Payment on a Check</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Stop Payment Scenarios:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ <strong>Lost Check:</strong> Check was lost in mail<br/>
                                â€¢ <strong>Dispute:</strong> Payee disputes services received<br/>
                                â€¢ <strong>Unauthorized Payment:</strong> Check issued fraudulently<br/>
                                â€¢ <strong>Duplicate Payment:</strong> Paid same bill twice<br/>
                                â€¢ <strong>Amount Error:</strong> Wrong amount written
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Stop Payment Process:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                1. Contact bank IMMEDIATELY (by phone first)<br/>
                                2. Provide check number and amount<br/>
                                3. Bank will issue stop payment order<br/>
                                4. Get confirmation from bank<br/>
                                5. In system, click <strong>"Stop Payment"</strong> action<br/>
                                6. Enter <strong>Reason</strong><br/>
                                7. Enter <strong>Stop Payment Fee</strong><br/>
                                8. Click <strong>"Stop Payment"</strong><br/>
                                9. Contact payee to explain (if appropriate)<br/>
                                10. Reissue check if still owed
                            </MudText>
                        </div>

                        <MudText Typo="Typo.body2" Class="mt-3">
                            <strong>Journal Entry (For Stop Payment Fee):</strong>
                        </MudText>
                        <MudText Typo="Typo.caption" Style="font-family: monospace; background: #f5f5f5; padding: 10px; border-radius: 4px;">
                            Dr. Bank Fees/Service Charges    $30<br/>
                            &nbsp;&nbsp;&nbsp;&nbsp;Cr. Cash/Bank Account               $30
                        </MudText>

                        <MudAlert Severity="Severity.Error" Dense="true">
                            <strong>Time Sensitive!</strong> Stop payments must be done before check clears (usually within 24 hours).
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Check Security & Fraud Prevention" Icon="@Icons.Material.Filled.Security">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Protecting Against Check Fraud</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Common Check Fraud Schemes:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ <strong>Check Washing:</strong> Altering payee or amount<br/>
                                â€¢ <strong>Counterfeit Checks:</strong> Fake checks using company info<br/>
                                â€¢ <strong>Forged Signatures:</strong> Unauthorized check signers<br/>
                                â€¢ <strong>Duplicate Payments:</strong> Same check paid twice<br/>
                                â€¢ <strong>Check Kiting:</strong> Floating checks between accounts
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Security Controls:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ <strong>Dual Signers:</strong> Require two authorized signatures on large checks<br/>
                                â€¢ <strong>Signature Cards:</strong> Keep updated at bank<br/>
                                â€¢ <strong>Sequential Numbering:</strong> Account for all check numbers<br/>
                                â€¢ <strong>Positive Pay:</strong> Provide issue file to bank, they only pay matching checks<br/>
                                â€¢ <strong>Account Reconciliation:</strong> Monthly bank reconciliation catches fraud<br/>
                                â€¢ <strong>Segregation of Duties:</strong> Different people approve, write, sign checks<br/>
                                â€¢ <strong>Secure Storage:</strong> Lock blank checks when not in use<br/>
                                â€¢ <strong>Voided Check Retention:</strong> Keep all voided checks
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Red Flags for Fraud:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                ðŸš© Check stock missing or can't be located<br/>
                                ðŸš© High number of voided checks<br/>
                                ðŸš© Unusual payees (employee names, unfamiliar vendors)<br/>
                                ðŸš© Duplicate check numbers<br/>
                                ðŸš© Checks to personal addresses<br/>
                                ðŸš© Round dollar amounts (suspicious pattern)<br/>
                                ðŸš© Lack of supporting documentation
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Error" Dense="true">
                            <strong>Critical:</strong> NEVER authorize checks without supporting documentation and proper approval!
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Check Printing" Icon="@Icons.Material.Filled.Info">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Printing Checks</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Check Stock Options:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ <strong>Pre-Printed Checks:</strong> Bank/company info already printed, just add details<br/>
                                â€¢ <strong>Blank Stock:</strong> Print all information from system<br/>
                                â€¢ <strong>Multi-Copy:</strong> Original + copies for accounting/vendor
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Printing Process:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                1. Select checks to print<br/>
                                2. Click <strong>"Print Checks"</strong> action<br/>
                                3. Load check stock in printer<br/>
                                4. System prints check details (amounts in numbers/words)<br/>
                                5. Check comes out ready for signature<br/>
                                6. Verify all details print correctly<br/>
                                7. Sign checks (authorized signers only)<br/>
                                8. Envelopes and mail<br/>
                                9. Update status to "Issued"
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Security in Printing:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                â€¢ Use secure printer (access control)<br/>
                                â€¢ Don't leave printed checks unattended<br/>
                                â€¢ Shred misprints (don't save)<br/>
                                â€¢ Monitor who has access to printers<br/>
                                â€¢ Use checks with security features (watermarks, microprinting)
                            </MudText>
                        </div>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Check Reconciliation" Icon="@Icons.Material.Filled.Assessment">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Reconciling Checks with Bank</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Outstanding Checks:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                Checks issued but not yet cleared (cashed) by payee:<br/>
                                â€¢ <strong>Normal Duration:</strong> 3-10 business days<br/>
                                â€¢ <strong>More than 30 days:</strong> Follow up with payee<br/>
                                â€¢ <strong>More than 90 days:</strong> Consider stop payment or reissue<br/>
                                â€¢ <strong>More than 6 months:</strong> Stale-dated, likely won't clear
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Monthly Reconciliation:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                1. Receive bank statement<br/>
                                2. Identify which checks cleared<br/>
                                3. Mark cleared checks in system<br/>
                                4. List all outstanding checks<br/>
                                5. Verify amounts match<br/>
                                6. Investigate any discrepancies<br/>
                                7. Follow up on stale checks<br/>
                                8. Complete bank reconciliation
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Outstanding Check Aging:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption" Style="font-family: monospace; background: #f5f5f5; padding: 10px; border-radius: 4px;">
                                Check #  Payee      Amount    Days Out   Status<br/>
                                1001     Acme Corp  $5,000    3          Normal<br/>
                                1002     Vendor Co  $2,500    45         Follow Up<br/>
                                1003     Bob Smith  $1,000    180        Stale - Reissue
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Warning" Dense="true">
                            <strong>Important:</strong> Monitor outstanding checks monthly - old outstanding checks impact cash position!
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Common Questions (FAQ)" Icon="@Icons.Material.Filled.QuestionAnswer">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Frequently Asked Questions</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Q: How long are blank checks valid?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: Banks typically honor checks for 6 months. After that, checks become "stale-dated" and banks may refuse payment.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Q: Can we handwrite checks?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: Yes, but they must have routing/account in MICR format. Most companies use printed checks for security and appearance.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Q: What if we mail a check and recipient says they didn't get it?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: Request stop payment, then reissue. If original check eventually shows up, you can reconcile it.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Q: Can we use electronic payments instead of checks?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: Yes! ACH and wire transfers are faster, safer, and more cost-effective. Many companies transition away from checks.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Q: How many authorized check signers should we have?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: Typically 2-3 people. Larger checks may require dual signatures. Provide signatures to bank to prevent forgeries.
                            </MudText>
                        </div>
                    </MudStack>
                </MudExpansionPanel>
            </MudExpansionPanels>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Primary" OnClick="@(() => MudDialog.Close())">Close</MudButton>
    </DialogActions>
</MudDialog>

