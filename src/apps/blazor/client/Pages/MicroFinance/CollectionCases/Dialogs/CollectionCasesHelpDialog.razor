<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Help" Class="mr-2" />
            Collection Cases Help
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudExpansionPanels MultiExpansion="true">
            <MudExpansionPanel Text="Overview" IsInitiallyExpanded="true">
                <MudText>
                    The Collection Cases module manages loan recovery operations for overdue accounts.
                    This system helps track delinquent loans, assign collectors, record contact attempts,
                    manage recoveries, and escalate cases to legal when necessary.
                </MudText>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Collection Case Workflow">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Add">
                        <strong>Case Creation</strong> - Cases are created automatically when a loan becomes overdue or manually for special situations
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Assignment">
                        <strong>Assignment</strong> - Cases are assigned to collectors for follow-up
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Phone">
                        <strong>Contact Attempts</strong> - Record all communication attempts with the borrower
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Payments">
                        <strong>Recovery</strong> - Record payments recovered from the borrower
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Handshake">
                        <strong>Settlement</strong> - Negotiate and record settlement agreements
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Gavel">
                        <strong>Legal Escalation</strong> - Escalate to legal proceedings when collection fails
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle">
                        <strong>Closure</strong> - Close the case with final outcome documentation
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Case Statuses">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.FiberNew">
                        <strong>New</strong> - Newly created case awaiting assignment
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Assignment">
                        <strong>Assigned</strong> - Case assigned to a collector
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.PlayArrow">
                        <strong>Active</strong> - Active collection efforts underway
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Pause">
                        <strong>On Hold</strong> - Temporarily on hold (e.g., payment promise)
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Gavel">
                        <strong>Legal</strong> - Escalated to legal proceedings
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle">
                        <strong>Closed</strong> - Case closed with final outcome
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Key Metrics">
                <MudText Class="mb-2">Important metrics tracked for each case:</MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Timer">
                        <strong>Days Past Due (DPD)</strong> - Number of days since payment was due
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.AttachMoney">
                        <strong>Amount Overdue</strong> - Total amount of missed payments
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.AccountBalance">
                        <strong>Total Outstanding</strong> - Full remaining loan balance
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Phone">
                        <strong>Contact Attempts</strong> - Number of collection attempts made
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CalendarToday">
                        <strong>Last Contact Date</strong> - Most recent communication with borrower
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Best Practices">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Schedule">
                        Document all contact attempts with date, time, and outcome
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Notes">
                        Keep detailed notes for audit and legal purposes
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Timelapse">
                        Follow up on payment promises within 24 hours
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.TrendingUp">
                        Escalate cases within the defined timeframes
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Security">
                        Ensure compliance with fair debt collection practices
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>
        </MudExpansionPanels>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@Close" Variant="Variant.Text" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = null!;

    private void Close() => MudDialog.Close();
}
