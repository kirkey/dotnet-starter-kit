@namespace FSH.Starter.Blazor.Client.Pages.MicroFinance.ShareProducts

<MudDialog>
    <DialogContent>
        <MudStack Spacing="3">
            <MudGrid>
                <MudItem xs="12">
                    <MudText Typo="Typo.h6">@Product.Name</MudText>
                    <MudText Typo="Typo.caption" Color="Color.Primary">@Product.Code</MudText>
                </MudItem>

                <MudItem xs="12">
                    <MudDivider />
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Status</MudText>
                    <MudChip T="string" Color="@GetStatusColor(Product.Status)" Size="Size.Small">@Product.Status</MudChip>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Currency</MudText>
                    <MudText Typo="Typo.body1">@(Product.CurrencyCode ?? "PHP")</MudText>
                </MudItem>

                @if (!string.IsNullOrEmpty(Product.Description))
                {
                    <MudItem xs="12">
                        <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Description</MudText>
                        <MudText Typo="Typo.body2">@Product.Description</MudText>
                    </MudItem>
                }

                <MudItem xs="12">
                    <MudText Typo="Typo.subtitle1" Class="mt-2"><strong>Share Values</strong></MudText>
                    <MudDivider />
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Nominal Value</MudText>
                    <MudText Typo="Typo.body1">@Product.NominalValue.ToString("N2")</MudText>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Current Price</MudText>
                    <MudText Typo="Typo.body1">@Product.CurrentPrice.ToString("N2")</MudText>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Min Shares for Membership</MudText>
                    <MudText Typo="Typo.body1">@Product.MinSharesForMembership</MudText>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Max Shares per Member</MudText>
                    <MudText Typo="Typo.body1">@(Product.MaxSharesPerMember?.ToString() ?? "Unlimited")</MudText>
                </MudItem>

                <MudItem xs="12">
                    <MudText Typo="Typo.subtitle1" Class="mt-2"><strong>Options</strong></MudText>
                    <MudDivider />
                </MudItem>

                <MudItem xs="12" md="4">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Allow Transfer</MudText>
                    <MudChip T="string" Color="@(Product.AllowTransfer ? Color.Success : Color.Default)" Size="Size.Small">
                        @(Product.AllowTransfer ? "Yes" : "No")
                    </MudChip>
                </MudItem>

                <MudItem xs="12" md="4">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Allow Redemption</MudText>
                    <MudChip T="string" Color="@(Product.AllowRedemption ? Color.Success : Color.Default)" Size="Size.Small">
                        @(Product.AllowRedemption ? "Yes" : "No")
                    </MudChip>
                </MudItem>

                <MudItem xs="12" md="4">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Pays Dividends</MudText>
                    <MudChip T="string" Color="@(Product.PaysDividends ? Color.Success : Color.Default)" Size="Size.Small">
                        @(Product.PaysDividends ? "Yes" : "No")
                    </MudChip>
                </MudItem>

                @if (Product.PaysDividends)
                {
                    <MudItem xs="12" md="4">
                        <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Dividend Frequency</MudText>
                        <MudText Typo="Typo.body1">@(Product.DividendFrequency ?? "N/A")</MudText>
                    </MudItem>
                }
            </MudGrid>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Close" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] 
    private IMudDialogInstance MudDialog { get; set; } = null!;

    [Parameter]
    public ShareProductResponse Product { get; set; } = null!;

    private void Close() => MudDialog.Close();

    private Color GetStatusColor(string status) => status switch
    {
        "Active" => Color.Success,
        "Inactive" => Color.Warning,
        "Discontinued" => Color.Error,
        _ => Color.Default
    };
}
