<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Help" Class="mr-2" />
            Loan Guarantors Help
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudExpansionPanels MultiExpansion="true">
            <MudExpansionPanel Text="Overview" IsInitiallyExpanded="true">
                <MudText>
                    Loan Guarantors are members who agree to repay a loan if the primary borrower defaults.
                    This module manages the registration, approval, and tracking of guarantors for all loans.
                    Guarantors provide additional security for the MFI and help members access larger loans.
                </MudText>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Guarantor Requirements">
                <MudText Class="mb-2">Typical requirements for a guarantor:</MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle">
                        Must be an active member in good standing
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle">
                        Savings balance should cover the guaranteed amount
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle">
                        Cannot guarantee more than their savings balance
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle">
                        Cannot have defaulted loans or be in arrears
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle">
                        Total guarantees cannot exceed a defined limit
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Guarantor Statuses">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.HourglassEmpty">
                        <strong>Pending</strong> - Awaiting approval/verification
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle">
                        <strong>Approved</strong> - Verified and active as guarantor
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Cancel">
                        <strong>Rejected</strong> - Did not meet requirements
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.EventBusy">
                        <strong>Expired</strong> - Guarantee period has ended
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Relationship Types">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.People">
                        <strong>Relative</strong> - Family member
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.PersonAdd">
                        <strong>Friend</strong> - Personal friend
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Business">
                        <strong>Colleague</strong> - Work colleague
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Groups">
                        <strong>Group Member</strong> - Same savings group
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Handshake">
                        <strong>Business Partner</strong> - Business associate
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Guarantor Liability">
                <MudText>
                    When a borrower defaults:
                </MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Warning">
                        Guarantor's savings may be attached to recover the debt
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Warning">
                        Guarantor's own loan applications may be affected
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Warning">
                        Legal action may be taken against guarantor
                    </MudListItem>
                </MudList>
                <MudText Class="mt-2">
                    <strong>Important:</strong> Guaranteed amount represents the maximum liability, 
                    not necessarily the full loan amount.
                </MudText>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Best Practices">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Verified">
                        Verify guarantor's savings balance before approval
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Verified">
                        Check guarantor's existing guarantee commitments
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Verified">
                        Ensure guarantor understands their liability
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Verified">
                        Obtain signed guarantee agreement
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Verified">
                        Monitor guarantee expiry dates
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>
        </MudExpansionPanels>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@Close" Variant="Variant.Text" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = null!;

    private void Close() => MudDialog.Close();
}
