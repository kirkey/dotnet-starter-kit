<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Help" Class="mr-2" />
            Loan Repayments Help
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudExpansionPanels MultiExpansion="true">
            <MudExpansionPanel Text="Overview" IsInitiallyExpanded="true">
                <MudText Typo="Typo.body2">
                    The Loan Repayments module tracks all payments made against active loans. Each repayment is 
                    automatically allocated to principal, interest, and any applicable penalty amounts. 
                    This ensures accurate loan balance tracking and proper accounting.
                </MudText>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Payment Methods">
                <MudText Typo="Typo.body2" Class="mb-2">
                    <strong>Supported Payment Methods:</strong>
                </MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Money">
                        <strong>Cash:</strong> Direct cash payment at branch
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.AccountBalance">
                        <strong>Bank Transfer:</strong> Payment via bank transfer
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CreditCard">
                        <strong>Card:</strong> Debit/Credit card payment
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.PhoneAndroid">
                        <strong>Mobile Money:</strong> Payment via mobile wallet
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Autorenew">
                        <strong>Standing Order:</strong> Automatic deduction from account
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Payment Allocation">
                <MudText Typo="Typo.body2" Class="mb-2">
                    <strong>How payments are allocated:</strong>
                </MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.LooksOne">
                        <strong>Penalties First:</strong> Any overdue penalties are settled first
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.LooksTwo">
                        <strong>Interest Second:</strong> Accrued interest is paid next
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Looks3">
                        <strong>Principal Last:</strong> Remaining amount reduces principal
                    </MudListItem>
                </MudList>
                <MudText Typo="Typo.body2" Class="mt-2">
                    Note: Some loan products may use different allocation orders.
                </MudText>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Key Actions">
                <MudText Typo="Typo.body2" Class="mb-2">
                    <strong>Available Operations:</strong>
                </MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Add">
                        <strong>Record Payment:</strong> Enter a new loan repayment
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Visibility">
                        <strong>View Details:</strong> See complete payment breakdown
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Receipt">
                        <strong>Print Receipt:</strong> Generate payment receipt for member
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Undo">
                        <strong>Reverse:</strong> Undo an incorrect payment (requires authorization)
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Receipts">
                <MudText Typo="Typo.body2">
                    <strong>Receipt Information:</strong>
                </MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Tag">
                        Each payment generates a unique receipt number
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Print">
                        Receipts can be printed for member records
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.History">
                        All receipts are stored for audit purposes
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Best Practices">
                <MudText Typo="Typo.body2">
                    <strong>Recommended Practices:</strong>
                </MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.VerifiedUser">
                        Verify member identity before recording payment
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Receipt">
                        Always provide receipt to member
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Note">
                        Add notes for non-standard payments
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Link">
                        Include transaction reference for electronic payments
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Balance">
                        Reconcile daily cash collections
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>
        </MudExpansionPanels>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@Cancel" Variant="Variant.Filled" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = null!;

    private void Cancel() => MudDialog.Cancel();
}
