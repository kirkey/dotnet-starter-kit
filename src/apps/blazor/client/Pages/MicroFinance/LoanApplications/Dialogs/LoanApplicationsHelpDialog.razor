<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Help" Class="mr-2" Color="Color.Info" />
            Loan Applications Help
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudExpansionPanels MultiExpansion="true">
            <MudExpansionPanel Text="What are Loan Applications?" IsInitiallyExpanded="true">
                <MudText Typo="Typo.body2" Class="pa-2">
                    Loan applications are requests from members to borrow money. Each application goes through
                    a workflow of submission, review, and approval/rejection before a loan is disbursed.
                    This ensures proper due diligence and risk assessment.
                </MudText>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Application Workflow">
                <MudTimeline TimelineAlign="TimelineAlign.Start">
                    <MudTimelineItem Color="Color.Default" Variant="Variant.Outlined">
                        <MudText Typo="Typo.subtitle2">1. Draft</MudText>
                        <MudText Typo="Typo.body2">Application created but not yet submitted</MudText>
                    </MudTimelineItem>
                    <MudTimelineItem Color="Color.Info" Variant="Variant.Outlined">
                        <MudText Typo="Typo.subtitle2">2. Submitted</MudText>
                        <MudText Typo="Typo.body2">Member has submitted for review</MudText>
                    </MudTimelineItem>
                    <MudTimelineItem Color="Color.Warning" Variant="Variant.Outlined">
                        <MudText Typo="Typo.subtitle2">3. Under Review</MudText>
                        <MudText Typo="Typo.body2">Assigned to loan officer for assessment</MudText>
                    </MudTimelineItem>
                    <MudTimelineItem Color="Color.Success" Variant="Variant.Outlined">
                        <MudText Typo="Typo.subtitle2">4. Approved</MudText>
                        <MudText Typo="Typo.body2">Application approved, ready for disbursement</MudText>
                    </MudTimelineItem>
                    <MudTimelineItem Color="Color.Primary" Variant="Variant.Outlined">
                        <MudText Typo="Typo.subtitle2">5. Disbursed</MudText>
                        <MudText Typo="Typo.body2">Loan has been disbursed to member</MudText>
                    </MudTimelineItem>
                </MudTimeline>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Application Statuses">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Edit" IconColor="Color.Default">
                        <strong>Draft:</strong> Not yet submitted, can still be modified
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Send" IconColor="Color.Info">
                        <strong>Submitted:</strong> Awaiting assignment to loan officer
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.RateReview" IconColor="Color.Warning">
                        <strong>Under Review:</strong> Being assessed by loan officer
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle" IconColor="Color.Success">
                        <strong>Approved:</strong> Application approved
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Cancel" IconColor="Color.Error">
                        <strong>Rejected:</strong> Application rejected with reason
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Undo" IconColor="Color.Dark">
                        <strong>Withdrawn:</strong> Applicant withdrew the request
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Review Process">
                <MudText Typo="Typo.body2" Class="pa-2">
                    Loan officers assess applications based on:
                </MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.AttachMoney">Income and debt-to-income ratio</MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.History">Repayment history with MFI</MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Score">Credit score assessment</MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Business">Purpose and business viability</MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Security">Collateral (if required)</MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Group">Group guarantee (for group loans)</MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Actions">
                <MudSimpleTable Dense="true">
                    <thead>
                        <tr>
                            <th>Action</th>
                            <th>Who</th>
                            <th>When</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Submit</td>
                            <td>Member/Staff</td>
                            <td>When draft is complete</td>
                        </tr>
                        <tr>
                            <td>Assign</td>
                            <td>Manager</td>
                            <td>After submission</td>
                        </tr>
                        <tr>
                            <td>Review</td>
                            <td>Loan Officer</td>
                            <td>After assignment</td>
                        </tr>
                        <tr>
                            <td>Approve/Reject</td>
                            <td>Approver</td>
                            <td>After review</td>
                        </tr>
                        <tr>
                            <td>Withdraw</td>
                            <td>Member</td>
                            <td>Before approval</td>
                        </tr>
                    </tbody>
                </MudSimpleTable>
            </MudExpansionPanel>
        </MudExpansionPanels>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@Close" Variant="Variant.Text">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = null!;

    private void Close() => MudDialog.Close();
}
