<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Security" Class="mr-2" />
            Collateral Type Details
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudGrid>
            <MudItem xs="12" md="6">
                <MudField Label="Code" Variant="Variant.Outlined">@CollateralType.Code</MudField>
            </MudItem>
            <MudItem xs="12" md="6">
                <MudField Label="Name" Variant="Variant.Outlined">@CollateralType.Name</MudField>
            </MudItem>
            <MudItem xs="12" md="6">
                <MudField Label="Category" Variant="Variant.Outlined">@CollateralType.Category</MudField>
            </MudItem>
            <MudItem xs="12" md="6">
                <MudField Label="Status" Variant="Variant.Outlined">
                    <MudChip T="string" Color="@(CollateralType.IsActive ? Color.Success : Color.Default)" Size="Size.Small">
                        @(CollateralType.IsActive ? "Active" : "Inactive")
                    </MudChip>
                </MudField>
            </MudItem>

            <MudItem xs="12">
                <MudDivider Class="my-2" />
                <MudText Typo="Typo.subtitle1" Class="mb-2">Loan-to-Value Settings</MudText>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudField Label="Default LTV %" Variant="Variant.Outlined">@CollateralType.DefaultLtvPercent.ToString("N2")%</MudField>
            </MudItem>
            <MudItem xs="12" md="6">
                <MudField Label="Maximum LTV %" Variant="Variant.Outlined">@CollateralType.MaxLtvPercent.ToString("N2")%</MudField>
            </MudItem>

            <MudItem xs="12">
                <MudDivider Class="my-2" />
                <MudText Typo="Typo.subtitle1" Class="mb-2">Depreciation Settings</MudText>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudField Label="Useful Life (Years)" Variant="Variant.Outlined">@CollateralType.DefaultUsefulLifeYears</MudField>
            </MudItem>
            <MudItem xs="12" md="6">
                <MudField Label="Annual Depreciation Rate %" Variant="Variant.Outlined">@CollateralType.AnnualDepreciationRate.ToString("N2")%</MudField>
            </MudItem>

            @if (!string.IsNullOrEmpty(CollateralType.Description))
            {
                <MudItem xs="12">
                    <MudField Label="Description" Variant="Variant.Outlined" Lines="2">@CollateralType.Description</MudField>
                </MudItem>
            }
        </MudGrid>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@Cancel" Variant="Variant.Filled" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [Parameter]
    public CollateralTypeResponse CollateralType { get; set; } = null!;

    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = null!;

    private void Cancel() => MudDialog.Cancel();
}
