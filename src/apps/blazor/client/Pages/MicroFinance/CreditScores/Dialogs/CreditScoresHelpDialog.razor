<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Help" Class="mr-2" />
            Credit Scores Help
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudExpansionPanels MultiExpansion="true">
            <MudExpansionPanel Text="Overview" IsInitiallyExpanded="true">
                <MudText>
                    Credit Scores assess member creditworthiness for lending decisions. This module tracks
                    internal scores calculated from member behavior and external scores from credit bureaus.
                    Scores help determine loan eligibility, interest rates, and credit limits.
                </MudText>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Score Grades">
                <MudList T="string" Dense="true">
                    <MudListItem>
                        <MudChip T="string" Size="Size.Small" Color="Color.Success">A</MudChip>
                        <strong class="ml-2">Excellent (800-850)</strong> - Lowest risk, best rates
                    </MudListItem>
                    <MudListItem>
                        <MudChip T="string" Size="Size.Small" Color="Color.Info">B</MudChip>
                        <strong class="ml-2">Good (700-799)</strong> - Low risk, good rates
                    </MudListItem>
                    <MudListItem>
                        <MudChip T="string" Size="Size.Small" Color="Color.Warning">C</MudChip>
                        <strong class="ml-2">Fair (600-699)</strong> - Medium risk, standard rates
                    </MudListItem>
                    <MudListItem>
                        <MudChip T="string" Size="Size.Small" Color="Color.Error">D</MudChip>
                        <strong class="ml-2">Poor (500-599)</strong> - High risk, higher rates
                    </MudListItem>
                    <MudListItem>
                        <MudChip T="string" Size="Size.Small" Color="Color.Error">E</MudChip>
                        <strong class="ml-2">Very Poor (300-499)</strong> - Very high risk, may decline
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Score Types">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Home">
                        <strong>Internal Score</strong> - Calculated from member's history with the MFI
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Business">
                        <strong>Credit Bureau Score</strong> - Obtained from external credit bureaus
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.MergeType">
                        <strong>Hybrid Score</strong> - Combination of internal and bureau data
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Score Factors">
                <MudText Class="mb-2">Key factors that influence credit scores:</MudText>
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Payment">
                        <strong>Payment History (35%)</strong> - On-time payments on loans and bills
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.AccountBalance">
                        <strong>Credit Utilization (30%)</strong> - Current balance vs available credit
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Timeline">
                        <strong>Account Age (15%)</strong> - Length of credit history
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Category">
                        <strong>Credit Mix (10%)</strong> - Variety of credit types (savings, loans)
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Search">
                        <strong>Recent Inquiries (10%)</strong> - New credit applications
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Probability of Default (PD)">
                <MudText>
                    PD represents the likelihood that a borrower will default on a loan within a given period.
                </MudText>
                <MudList T="string" Dense="true" Class="mt-2">
                    <MudListItem>
                        <strong>0-5%</strong> - Very low risk
                    </MudListItem>
                    <MudListItem>
                        <strong>5-10%</strong> - Low risk
                    </MudListItem>
                    <MudListItem>
                        <strong>10-20%</strong> - Medium risk
                    </MudListItem>
                    <MudListItem>
                        <strong>20-50%</strong> - High risk
                    </MudListItem>
                    <MudListItem>
                        <strong>50%+</strong> - Very high risk
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Best Practices">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Refresh">
                        Refresh scores regularly (at least annually)
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Verified">
                        Use multiple score sources for major lending decisions
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Visibility">
                        Review score factors to understand member risk profile
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.TrendingUp">
                        Monitor score trends over time
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Warning">
                        Flag expired scores for renewal before lending
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>
        </MudExpansionPanels>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@Close" Variant="Variant.Text" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = null!;

    private void Close() => MudDialog.Close();
}
