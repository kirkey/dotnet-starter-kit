@namespace FSH.Starter.Blazor.Client.Pages.MicroFinance.Branches

<MudDialog>
    <DialogContent>
        <MudStack Spacing="3">
            <MudGrid>
                <MudItem xs="12">
                    <MudText Typo="Typo.h6">@Branch.Name</MudText>
                    <MudText Typo="Typo.caption" Color="Color.Primary">@Branch.Code</MudText>
                </MudItem>

                <MudItem xs="12">
                    <MudDivider />
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Branch Type</MudText>
                    <MudText Typo="Typo.body1">@Branch.BranchType</MudText>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Status</MudText>
                    <MudChip T="string" Color="@GetStatusColor(Branch.Status)" Size="Size.Small">@Branch.Status</MudChip>
                </MudItem>

                <MudItem xs="12">
                    <MudText Typo="Typo.subtitle1" Class="mt-2"><strong>Location</strong></MudText>
                    <MudDivider />
                </MudItem>

                <MudItem xs="12">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Address</MudText>
                    <MudText Typo="Typo.body1">
                        @(Branch.Address ?? "N/A")
                    </MudText>
                </MudItem>

                <MudItem xs="12">
                    <MudText Typo="Typo.subtitle1" Class="mt-2"><strong>Contact Information</strong></MudText>
                    <MudDivider />
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Phone</MudText>
                    <MudText Typo="Typo.body1">@(Branch.Phone ?? "N/A")</MudText>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Email</MudText>
                    <MudText Typo="Typo.body1">@(Branch.Email ?? "N/A")</MudText>
                </MudItem>

                <MudItem xs="12">
                    <MudText Typo="Typo.subtitle1" Class="mt-2"><strong>Management</strong></MudText>
                    <MudDivider />
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Manager</MudText>
                    <MudText Typo="Typo.body1">@(Branch.ManagerName ?? "Not Assigned")</MudText>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Manager Phone</MudText>
                    <MudText Typo="Typo.body1">@(Branch.ManagerPhone ?? "N/A")</MudText>
                </MudItem>

                <MudItem xs="12">
                    <MudText Typo="Typo.subtitle1" Class="mt-2"><strong>Operations</strong></MudText>
                    <MudDivider />
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Opening Date</MudText>
                    <MudText Typo="Typo.body1">@(Branch.OpeningDate?.ToString("yyyy-MM-dd") ?? "N/A")</MudText>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Cash Holding Limit</MudText>
                    <MudText Typo="Typo.body1">@(Branch.CashHoldingLimit?.ToString("N2") ?? "N/A")</MudText>
                </MudItem>

                @if (!string.IsNullOrEmpty(Branch.Notes))
                {
                    <MudItem xs="12">
                        <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Notes</MudText>
                        <MudText Typo="Typo.body2">@Branch.Notes</MudText>
                    </MudItem>
                }
            </MudGrid>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Close" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] 
    private IMudDialogInstance MudDialog { get; set; } = null!;

    [Parameter]
    public BranchResponse Branch { get; set; } = null!;

    private void Close() => MudDialog.Close();

    private Color GetStatusColor(string status) => status switch
    {
        "Active" => Color.Success,
        "Inactive" => Color.Warning,
        "Closed" => Color.Error,
        _ => Color.Default
    };
}
