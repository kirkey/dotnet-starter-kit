@namespace FSH.Starter.Blazor.Client.Pages.MicroFinance.Staff

<MudDialog>
    <DialogContent>
        <MudStack Spacing="3">
            <MudText Typo="Typo.h6">Staff Management Help</MudText>

            <MudExpansionPanels Elevation="@_preference.Elevation">
                <MudExpansionPanel Text="What is Staff Management?">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Understanding Staff Records</MudText>
                        <MudText Typo="Typo.body2">
                            Staff management maintains records of all employees who deliver microfinance services.
                            Staff members are assigned roles, branches, and portfolios to serve members.
                        </MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Staff Roles in MFI:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • <strong>Loan Officer:</strong> Manages loan portfolio, member relationships, collections<br/>
                                • <strong>Branch Manager:</strong> Oversees branch operations and staff<br/>
                                • <strong>Teller:</strong> Handles cash transactions, deposits, withdrawals<br/>
                                • <strong>Collector:</strong> Focuses on delinquent loan recovery<br/>
                                • <strong>Credit Analyst:</strong> Evaluates loan applications<br/>
                                • <strong>Field Coordinator:</strong> Supervises field operations
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Info" Dense="true">
                            <strong>Best Practice:</strong> Link staff records to user accounts for proper access control.
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Staff Roles & Responsibilities">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Role-Based Functions</MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Loan Officer Responsibilities:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • Manage assigned member portfolio (50-200 members)<br/>
                                • Process loan applications and disbursements<br/>
                                • Conduct group meetings and trainings<br/>
                                • Monitor repayments and follow up on arrears<br/>
                                • Build relationships with members and community
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Branch Manager Responsibilities:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • Supervise all branch operations and staff<br/>
                                • Approve loans within authority limit<br/>
                                • Ensure portfolio quality and targets<br/>
                                • Cash management and vault oversight<br/>
                                • Compliance and regulatory reporting
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Teller Responsibilities:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • Process deposits and withdrawals<br/>
                                • Loan disbursement payments<br/>
                                • Cash drawer management<br/>
                                • End-of-day reconciliation
                            </MudText>
                        </div>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Employment Types">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Staff Categories</MudText>
                        
                        <MudSimpleTable Dense="true" Hover="true">
                            <thead>
                                <tr>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Full Time</strong></td>
                                    <td>Regular employee with full benefits</td>
                                </tr>
                                <tr>
                                    <td><strong>Part Time</strong></td>
                                    <td>Works limited hours, reduced benefits</td>
                                </tr>
                                <tr>
                                    <td><strong>Contract</strong></td>
                                    <td>Fixed-term engagement for specific project</td>
                                </tr>
                                <tr>
                                    <td><strong>Probationary</strong></td>
                                    <td>New hire under evaluation period</td>
                                </tr>
                            </tbody>
                        </MudSimpleTable>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Performance Tracking">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Key Performance Indicators</MudText>
                        <MudText Typo="Typo.body2">
                            Staff performance is tracked using various metrics based on their role.
                        </MudText>
                        
                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Loan Officer KPIs:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • Active clients managed<br/>
                                • Loan disbursement volume<br/>
                                • Collection rate (on-time payments)<br/>
                                • Portfolio at Risk (PAR) rate<br/>
                                • New member enrollment
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Info" Dense="true">
                            <strong>Targets:</strong> Staff targets are set monthly and tracked through the Loan Officer Targets module.
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Adding New Staff">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Step-by-Step Guide</MudText>
                        
                        <ol>
                            <li><MudText Typo="Typo.caption">Click the <strong>+</strong> button to open the add staff form</MudText></li>
                            <li><MudText Typo="Typo.caption">Enter a unique <strong>Employee Number</strong> (e.g., EMP-001)</MudText></li>
                            <li><MudText Typo="Typo.caption">Fill in <strong>personal information</strong> - name, email, phone</MudText></li>
                            <li><MudText Typo="Typo.caption">Select the <strong>Job Title</strong> and <strong>Role</strong></MudText></li>
                            <li><MudText Typo="Typo.caption">Choose <strong>Employment Type</strong> and set <strong>Joining Date</strong></MudText></li>
                            <li><MudText Typo="Typo.caption">Click <strong>Save</strong> to create the staff record</MudText></li>
                        </ol>

                        <MudAlert Severity="Severity.Warning" Dense="true">
                            <strong>Important:</strong> Create a user account and link it to enable system access.
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>
            </MudExpansionPanels>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Close" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] 
    private IMudDialogInstance MudDialog { get; set; } = null!;

    private ClientPreference _preference = new();

    protected override async Task OnInitializedAsync()
    {
        if (await ClientPreferences.GetPreference() is ClientPreference preference)
        {
            _preference = preference;
        }
    }

    private void Close() => MudDialog.Close();
}
