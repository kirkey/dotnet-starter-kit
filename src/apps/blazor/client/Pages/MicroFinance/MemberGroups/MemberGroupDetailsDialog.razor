@namespace FSH.Starter.Blazor.Client.Pages.MicroFinance.MemberGroups

<MudDialog>
    <DialogContent>
        <MudStack Spacing="3">
            <MudGrid>
                <MudItem xs="12">
                    <MudText Typo="Typo.h6">@Group.Name</MudText>
                    <MudText Typo="Typo.caption" Color="Color.Primary">@Group.Code</MudText>
                </MudItem>

                <MudItem xs="12">
                    <MudDivider />
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Status</MudText>
                    <MudChip T="string" Color="@GetStatusColor(Group.Status)" Size="Size.Small">@Group.Status</MudChip>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Member Count</MudText>
                    <MudChip T="string" Color="Color.Info" Size="Size.Small">@Group.MemberCount members</MudChip>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Formation Date</MudText>
                    <MudText Typo="Typo.body1">@Group.FormationDate.ToString("yyyy-MM-dd")</MudText>
                </MudItem>

                <MudItem xs="12" md="6">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Group Leader</MudText>
                    <MudText Typo="Typo.body1">@(Group.LeaderName ?? "Not Assigned")</MudText>
                </MudItem>

                @if (!string.IsNullOrEmpty(Group.Description))
                {
                    <MudItem xs="12">
                        <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Description</MudText>
                        <MudText Typo="Typo.body2">@Group.Description</MudText>
                    </MudItem>
                }

                <MudItem xs="12">
                    <MudText Typo="Typo.subtitle1" Class="mt-2"><strong>Meeting Schedule</strong></MudText>
                    <MudDivider />
                </MudItem>

                <MudItem xs="12" md="4">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Frequency</MudText>
                    <MudText Typo="Typo.body1">@(Group.MeetingFrequency ?? "N/A")</MudText>
                </MudItem>

                <MudItem xs="12" md="4">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Meeting Day</MudText>
                    <MudText Typo="Typo.body1">@(Group.MeetingDay ?? "N/A")</MudText>
                </MudItem>

                <MudItem xs="12" md="4">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Meeting Time</MudText>
                    <MudText Typo="Typo.body1">@(Group.MeetingTime?.ToString("hh\\:mm") ?? "N/A")</MudText>
                </MudItem>

                <MudItem xs="12">
                    <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Meeting Location</MudText>
                    <MudText Typo="Typo.body1">@(Group.MeetingLocation ?? "N/A")</MudText>
                </MudItem>

                @if (!string.IsNullOrEmpty(Group.Notes))
                {
                    <MudItem xs="12">
                        <MudText Typo="Typo.subtitle2" Class="mud-text-secondary">Notes</MudText>
                        <MudText Typo="Typo.body2">@Group.Notes</MudText>
                    </MudItem>
                }
            </MudGrid>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Close" Color="Color.Primary">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] 
    private IMudDialogInstance MudDialog { get; set; } = null!;

    [Parameter]
    public MemberGroupResponse Group { get; set; } = null!;

    private void Close() => MudDialog.Close();

    private Color GetStatusColor(string status) => status switch
    {
        "Active" => Color.Success,
        "Inactive" => Color.Warning,
        "Dissolved" => Color.Error,
        _ => Color.Default
    };
}
