@namespace FSH.Starter.Blazor.Client.Pages.HumanResources.OrganizationalUnits

<MudDialog>
    <DialogContent>
        <MudStack Spacing="3">
            <MudText Typo="Typo.h6">Organizational Units Help</MudText>

            <MudExpansionPanels>
                <MudExpansionPanel Text="What are Organizational Units?">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Understanding Your Organization Structure</MudText>
                        <MudText Typo="Typo.body2">
                            Organizational Units define your company's hierarchical structure. They represent departments, divisions, and sections 
                            that organize employees and establish reporting relationships. Every organization needs a clear structure for accountability, 
                            payroll processing, and resource allocation.
                        </MudText>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>The Three Levels of Hierarchy:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • <strong>Level 1 - Department:</strong> Top-level organizational units (e.g., HR, Finance, Operations)<br/>
                                • <strong>Level 2 - Division:</strong> Sub-divisions within departments (e.g., Payroll Division under HR)<br/>
                                • <strong>Level 3 - Section:</strong> Smallest units within divisions (e.g., Benefits Section under Payroll)
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Info" Dense="true">
                            <strong>Key Principle:</strong> Every organization starts with departments at the top level!
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="How to Create Organizational Units">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Step-by-Step Creation Guide</MudText>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Step 1: Create Root Departments</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • Click "Create" button<br/>
                                • Select Type: "Department"<br/>
                                • Parent Unit: Leave empty (departments have no parent)<br/>
                                • Enter Code (e.g., "HR-001") and Name (e.g., "Human Resources")<br/>
                                • Check "Active" checkbox<br/>
                                • Click "Save"
                            </MudText>
                        </div>

                        <MudDivider />

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Step 2: Create Divisions Under Departments</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • Click "Create" button<br/>
                                • Select Type: "Division"<br/>
                                • Parent Unit: Select a Department (required for divisions)<br/>
                                • Enter Code (e.g., "HR-DIV-001") and Name (e.g., "Payroll Division")<br/>
                                • Check "Active" checkbox<br/>
                                • Click "Save"
                            </MudText>
                        </div>

                        <MudDivider />

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Step 3: Create Sections Under Divisions</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • Click "Create" button<br/>
                                • Select Type: "Section"<br/>
                                • Parent Unit: Select a Division (required for sections)<br/>
                                • Enter Code (e.g., "HR-SEC-001") and Name (e.g., "Benefits Section")<br/>
                                • Check "Active" checkbox<br/>
                                • Click "Save"
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Warning" Dense="true">
                            <strong>Important:</strong> You cannot create circular references (A→B→A). The system prevents this automatically.
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Field Guide">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Understanding Each Field</MudText>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Code:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                Unique identifier for the unit (e.g., "HR-001", "DIST-DIV-001"). Immutable after creation. Use consistent format.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Name:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                Display name (e.g., "Human Resources Department"). Can be changed anytime.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Type:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                Department, Division, or Section. Immutable after creation. Determines hierarchy level.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Parent Unit:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                The unit above this one in hierarchy. Optional for Departments, Required for Divisions/Sections. Must follow hierarchy rules.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Cost Center:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                Accounting code for budgeting (e.g., "CC-001"). Links to accounting system for expense tracking.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Location:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                Physical office location or building (e.g., "Building A, Floor 3").
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Active:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                Checkbox to enable/disable the unit. Only active units can be used for employee assignments. Inactive units preserve history.
                            </MudText>
                        </div>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Edit and Delete Operations">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Modifying Your Structure</MudText>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Editing Units:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • Click the "Edit" icon on any row<br/>
                                • Code and Type cannot be changed (immutable)<br/>
                                • You can change: Name, Parent Unit, Cost Center, Location, Active status<br/>
                                • Click "Update" to save changes
                            </MudText>
                        </div>

                        <MudDivider />

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-2">
                                <strong>Deleting Units:</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                • Click the "Delete" icon on any row<br/>
                                • Confirm the deletion<br/>
                                • Cannot delete if unit has active child units or assigned employees<br/>
                                • Alternative: Deactivate instead to preserve history
                            </MudText>
                        </div>

                        <MudAlert Severity="Severity.Warning" Dense="true">
                            <strong>Pro Tip:</strong> Deactivate instead of deleting to keep historical data for reports!
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Search and Filtering">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Finding Units</MudText>

                        <MudText Typo="Typo.body2">
                            Use the search box to find units by:
                        </MudText>
                        <MudText Typo="Typo.caption">
                            • <strong>Code:</strong> Search by unit code (e.g., "HR-001")<br/>
                            • <strong>Name:</strong> Search by unit name (e.g., "Human Resources")<br/>
                            • <strong>Type:</strong> Filter by Department, Division, or Section<br/>
                            • <strong>Active Status:</strong> Show only active/inactive units
                        </MudText>

                        <MudDivider />

                        <MudText Typo="Typo.body2" Class="mt-2">
                            <strong>Sorting:</strong> Click any column header to sort ascending/descending.
                        </MudText>

                        <MudAlert Severity="Severity.Info" Dense="true">
                            Use Advanced Search for complex queries combining multiple criteria.
                        </MudAlert>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Best Practices">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Tips for Success</MudText>

                        <MudText Typo="Typo.body2" Class="mb-2">
                            <strong>Naming & Coding:</strong>
                        </MudText>
                        <MudText Typo="Typo.caption">
                            • Use clear, descriptive names (not abbreviations)<br/>
                            • Use consistent code format (e.g., "DEPT-001", "DEPT-DIV-001")<br/>
                            • Include hierarchy level in code if helpful
                        </MudText>

                        <MudDivider />

                        <MudText Typo="Typo.body2" Class="mb-2">
                            <strong>Hierarchy Management:</strong>
                        </MudText>
                        <MudText Typo="Typo.caption">
                            • Keep hierarchy to 3 levels maximum for clarity<br/>
                            • Avoid overly deep structures<br/>
                            • Review and update regularly as company evolves<br/>
                            • Keep parent-child relationships logical and meaningful
                        </MudText>

                        <MudDivider />

                        <MudText Typo="Typo.body2" Class="mb-2">
                            <strong>Active Status:</strong>
                        </MudText>
                        <MudText Typo="Typo.caption">
                            • Keep only current units active<br/>
                            • Deactivate reorganized units instead of deleting<br/>
                            • Archive inactive units using deactivation<br/>
                            • Use active/inactive for seasonal structures
                        </MudText>

                        <MudDivider />

                        <MudText Typo="Typo.body2" Class="mb-2">
                            <strong>Accounting Integration:</strong>
                        </MudText>
                        <MudText Typo="Typo.caption">
                            • Align cost centers with accounting structure<br/>
                            • Use same cost center format throughout<br/>
                            • Link departments to GL accounts correctly<br/>
                            • Document the structure for finance team
                        </MudText>
                    </MudStack>
                </MudExpansionPanel>

                <MudExpansionPanel Text="FAQ">
                    <MudStack Spacing="2">
                        <MudText Typo="Typo.subtitle2">Common Questions</MudText>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Q: Can I have more than 3 levels?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: No. The system is limited to 3 levels (Department/Division/Section) to maintain clarity and simplicity.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Q: Can I change a Division to a Department?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: No. Type is immutable. Deactivate and recreate if needed.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Q: What happens when I deactivate a unit?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: The unit is disabled and won't appear in employee assignment dropdowns, but the data is preserved for history and reports.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Q: Can I move a unit to a different parent?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: Yes. Edit the unit and select a new parent. The system validates the move is valid.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Q: Why can't I delete this unit?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: You may have active child units or employees assigned. Deactivate children first or deactivate this unit instead.
                            </MudText>
                        </div>

                        <div>
                            <MudText Typo="Typo.body2" Class="mb-1">
                                <strong>Q: Can multiple units have the same code?</strong>
                            </MudText>
                            <MudText Typo="Typo.caption">
                                A: No. Codes must be unique across the organization for proper tracking and reporting.
                            </MudText>
                        </div>
                    </MudStack>
                </MudExpansionPanel>
            </MudExpansionPanels>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Close">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] IMudDialogInstance MudDialog { get; set; } = null!;

    private void Close() => MudDialog.Cancel();
}

