@namespace FSH.Starter.Blazor.Client.Pages.Hr.BenefitEnrollments

<MudDialog>
    <DialogContent>
        <MudStack Spacing="3">
            <MudText Typo="Typo.h6">Benefit Enrollments Help</MudText>

            <MudExpansionPanels Elevation="@_preference.Elevation">
                <MudExpansionPanel Text="Overview">
                    <MudText>
                        Benefit Enrollments track employee participation in company-offered benefit programs such as 
                        health insurance, life insurance, retirement plans, and other employee benefits.
                    </MudText>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Coverage Levels">
                    <MudList T="string" Dense="true">
                        <MudListItem Icon="@Icons.Material.Filled.Person">
                            <strong>Individual:</strong> Covers only the employee
                        </MudListItem>
                        <MudListItem Icon="@Icons.Material.Filled.People">
                            <strong>Individual + Spouse:</strong> Covers employee and spouse
                        </MudListItem>
                        <MudListItem Icon="@Icons.Material.Filled.ChildCare">
                            <strong>Individual + Children:</strong> Covers employee and dependent children
                        </MudListItem>
                        <MudListItem Icon="@Icons.Material.Filled.FamilyRestroom">
                            <strong>Family:</strong> Full family coverage including spouse and children
                        </MudListItem>
                    </MudList>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Key Dates">
                    <MudList T="string" Dense="true">
                        <MudListItem Icon="@Icons.Material.Filled.Event">
                            <strong>Enrollment Date:</strong> When the employee signed up for the benefit
                        </MudListItem>
                        <MudListItem Icon="@Icons.Material.Filled.PlayArrow">
                            <strong>Effective Date:</strong> When the coverage actually begins
                        </MudListItem>
                        <MudListItem Icon="@Icons.Material.Filled.Stop">
                            <strong>End Date:</strong> When the coverage terminates (if applicable)
                        </MudListItem>
                    </MudList>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Contributions">
                    <MudText>
                        Most benefits involve shared costs between the employee and employer. 
                        The contribution amounts shown are typically per pay period (bi-weekly or monthly).
                    </MudText>
                </MudExpansionPanel>

                <MudExpansionPanel Text="Terminating Enrollments">
                    <MudText>
                        Use the "Terminate Enrollment" action to end an employee's participation in a benefit plan. 
                        This is typically done when an employee leaves the company, loses eligibility, 
                        or voluntarily opts out during an open enrollment period.
                    </MudText>
                </MudExpansionPanel>
            </MudExpansionPanels>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@Close" Variant="Variant.Filled" Color="Color.Primary">
            Close
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = default!;

    private ClientPreference _preference = new();

    protected override async Task OnInitializedAsync()
    {
        if (await ClientPreferences.GetPreference() is ClientPreference preference)
        {
            _preference = preference;
        }

        Courier.SubscribeWeak<NotificationWrapper<ClientPreference>>(wrapper =>
        {
            _preference.Elevation = ClientPreference.SetClientPreference(wrapper.Notification);
            _preference.BorderRadius = ClientPreference.SetClientBorderRadius(wrapper.Notification);
            StateHasChanged();
            return Task.CompletedTask;
        });
    }

    private void Close() => MudDialog.Close();
}
