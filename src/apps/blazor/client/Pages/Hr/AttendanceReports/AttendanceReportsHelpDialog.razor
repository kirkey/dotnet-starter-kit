@namespace FSH.Starter.Blazor.Client.Pages.Hr.AttendanceReports
@using FSH.Starter.Blazor.Infrastructure.Notifications

<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.body1" Class="mb-4">
            The Attendance Reports module provides comprehensive analytics and reporting for employee attendance tracking.
        </MudText>

        <MudExpansionPanels MultiExpansion="true" Elevation="@_preference.Elevation">
            <MudExpansionPanel Text="Report Types" Icon="@Icons.Material.Filled.Assessment">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Today">
                        <b>Daily Reports</b> - Day-by-day attendance breakdown
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.DateRange">
                        <b>Weekly Reports</b> - Weekly attendance summaries
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.CalendarMonth">
                        <b>Monthly Reports</b> - Monthly attendance overview
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.EventNote">
                        <b>Quarterly/Yearly</b> - Long-term attendance trends
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Key Metrics" Icon="@Icons.Material.Filled.Analytics">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.CheckCircle">
                        <b>Present Count</b> - Total employees present
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Cancel">
                        <b>Absent Count</b> - Total absences recorded
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Schedule">
                        <b>Late Arrivals</b> - Employees arriving late
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Percent">
                        <b>Attendance %</b> - Overall attendance rate
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>

            <MudExpansionPanel Text="Actions" Icon="@Icons.Material.Filled.TouchApp">
                <MudList T="string" Dense="true">
                    <MudListItem Icon="@Icons.Material.Filled.Visibility">
                        <b>View Details</b> - See complete report breakdown
                    </MudListItem>
                    <MudListItem Icon="@Icons.Material.Filled.Download">
                        <b>Download</b> - Export report for offline use
                    </MudListItem>
                </MudList>
            </MudExpansionPanel>
        </MudExpansionPanels>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Primary" OnClick="Close">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = null!;
    private ClientPreference _preference = new();

    protected override async Task OnInitializedAsync()
    {
        if (await ClientPreferences.GetPreference() is ClientPreference preference)
        {
            _preference = preference;
        }

        Courier.SubscribeWeak<NotificationWrapper<ClientPreference>>(wrapper =>
        {
            _preference.Elevation = ClientPreference.SetClientPreference(wrapper.Notification);
            _preference.BorderRadius = ClientPreference.SetClientBorderRadius(wrapper.Notification);
            StateHasChanged();
            return Task.CompletedTask;
        });
    }

    private void Close() => MudDialog.Close();
}
