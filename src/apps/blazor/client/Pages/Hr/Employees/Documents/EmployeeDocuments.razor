@page "/human-resources/employees/documents"
@namespace FSH.Starter.Blazor.Client.Pages.Hr.Employees.Documents

<PageHeader Title="@($"Employee Documents{FilterSuffix}")" Header="Employee Documents" SubHeader="Manage employee documents, certifications, licenses, and contracts." />

@if (!string.IsNullOrEmpty(FilterEmployeeId))
{
    <MudAlert Severity="Severity.Info" Class="mb-4">
        Viewing documents for Employee ID: <strong>@FilterEmployeeId</strong>
        <MudButton Size="Size.Small" Variant="Variant.Text" OnClick="ClearFilter" Class="float-right">Clear Filter</MudButton>
    </MudAlert>
}

<EntityTable TEntity="EmployeeDocumentResponse" TId="DefaultIdType" TRequest="EmployeeDocumentViewModel" Context="@Context">
    <EditFormContent Context="context">
        @if (!Context.AddEditModal.IsCreate)
        {
            <MudItem xs="12" sm="6" md="4">
                <MudTextField Value="context.Id" Underline="false" ReadOnly Label="Document ID" />
            </MudItem>
        }

        <MudDivider DividerType="DividerType.FullWidth" Class="my-4" />

        <MudItem xs="12">
            <MudText Typo="Typo.subtitle2" GutterBottom="true">Document Information</MudText>
        </MudItem>

        <MudItem xs="12" sm="6" md="4">
            <MudSelect T="string?"
                       @bind-Value="context.DocumentType"
                       For="@(() => context.DocumentType)"
                       Label="Document Type"
                       Variant="Variant.Filled"
                       Required="true">
                <MudSelectItem Value="@("Contract")">Contract</MudSelectItem>
                <MudSelectItem Value="@("Certification")">Certification</MudSelectItem>
                <MudSelectItem Value="@("License")">License</MudSelectItem>
                <MudSelectItem Value="@("Identity")">Identity Document</MudSelectItem>
                <MudSelectItem Value="@("Medical")">Medical Certificate</MudSelectItem>
                <MudSelectItem Value="@("Other")">Other</MudSelectItem>
            </MudSelect>
        </MudItem>

        <MudItem xs="12" sm="6" md="4">
            <MudTextField @bind-Value="context.Title"
                          For="@(() => context.Title)"
                          Label="Document Title"
                          Variant="Variant.Filled" />
        </MudItem>

        <MudItem xs="12" sm="6" md="4">
            <MudTextField @bind-Value="context.IssueNumber"
                          For="@(() => context.IssueNumber)"
                          Label="Issue Number"
                          Variant="Variant.Filled" />
        </MudItem>

        <MudItem xs="12" sm="6" md="4">
            <MudDatePicker @bind-Date="context.IssueDate"
                           For="@(() => context.IssueDate)"
                           Label="Issue Date"
                           Variant="Variant.Filled"
                           MaxDate="DateTime.Today" />
        </MudItem>

        <MudItem xs="12" sm="6" md="4">
            <MudDatePicker @bind-Date="context.ExpiryDate"
                           For="@(() => context.ExpiryDate)"
                           Label="Expiry Date"
                           Variant="Variant.Filled"
                           Clearable="true" />
        </MudItem>

        <MudItem xs="12">
            <MudTextField @bind-Value="context.Notes"
                          For="@(() => context.Notes)"
                          Label="Notes"
                          Lines="3"
                          Variant="Variant.Filled" />
        </MudItem>
    </EditFormContent>
</EntityTable>

