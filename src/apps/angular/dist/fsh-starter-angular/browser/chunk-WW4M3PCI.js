import{a as pe,b as ue}from"./chunk-5U6OGFBH.js";import{a as me,f as de}from"./chunk-SGCXT6IT.js";import{a as X,b as Y,c as Z,d as ee,f as te,g as ie}from"./chunk-NTPCJOWJ.js";import"./chunk-4IQRVVSS.js";import{a as ce}from"./chunk-BSR2XVU6.js";import{a as se}from"./chunk-MEZ4YZNT.js";import"./chunk-R6QGXIMR.js";import{a as le}from"./chunk-XZK5SHMD.js";import{a as ne,b as ae}from"./chunk-BK3PSTX2.js";import{k as re,l as oe}from"./chunk-FCCRYPII.js";import{b as W}from"./chunk-LSYIZ5ZS.js";import"./chunk-BLGZ2ZXV.js";import{a as J,b as q}from"./chunk-36HQY7RT.js";import"./chunk-7FXRJWRW.js";import"./chunk-OEMMV5VK.js";import{a as G,b as K,d as Q}from"./chunk-U2EMCCYP.js";import{a as D,c as $,d as B,h as H}from"./chunk-VLA6YYWX.js";import"./chunk-NW6BZQUB.js";import"./chunk-CARY4E7O.js";import{Bb as i,Cb as t,Db as S,Hb as j,Kb as M,Mb as m,Sc as R,Ta as h,Wa as o,Wb as n,Xb as c,Yb as P,Zb as z,cc as F,ea as p,fb as x,ia as T,mb as g,qa as v,ra as C,rb as u,sb as L,ub as V,wb as _,xc as b}from"./chunk-ENBBOSSX.js";import{a as I,b as w}from"./chunk-4CLCTAJ7.js";function fe(r,f){r&1&&(i(0,"div",3),S(1,"mat-spinner",5),t())}function ge(r,f){if(r&1){let e=j();i(0,"mat-card",6)(1,"mat-card-header")(2,"mat-card-title"),n(3,"Administrator Settings"),t(),i(4,"mat-card-subtitle"),n(5,"This is an Administrator Only View"),t()(),i(6,"mat-card-content")(7,"div",19)(8,"mat-slide-toggle",20),M("change",function(l){v(e);let d=m(2);return C(d.onStatusChange(l.checked))}),n(9," Active "),t(),i(10,"mat-slide-toggle",21),n(11," Email Confirmed "),t(),i(12,"button",22),M("click",function(){v(e);let l=m(2);return C(l.saveStatus())}),n(13," Save Changes "),t()()()()}if(r&2){let e,a,l=m(2);o(8),u("checked",(e=l.user())==null?null:e.isActive),o(2),u("checked",(a=l.user())==null?null:a.emailConfirmed)("disabled",!0)}}function _e(r,f){if(r&1&&S(0,"img",9),r&2){let e,a=m(2);u("src",(e=a.user())==null?null:e.imageUrl,h)}}function xe(r,f){if(r&1&&(i(0,"div",23),n(1),t()),r&2){let e=m(2);L("background-color",e.getAvatarColor()),o(),P(" ",e.getInitials()," ")}}function ve(r,f){if(r&1&&(i(0,"a",13)(1,"mat-icon"),n(2,"visibility"),t(),n(3," View Image "),t()),r&2){let e,a=m(2);u("href",(e=a.user())==null?null:e.imageUrl,h)}}function Ce(r,f){if(r&1&&(i(0,"div",4),g(1,ge,14,3,"mat-card",6),i(2,"mat-card",7)(3,"mat-card-content")(4,"div",8),g(5,_e,1,1,"img",9)(6,xe,2,3,"div",10),i(7,"h2",11),n(8),t(),i(9,"p",12),n(10),t(),g(11,ve,4,1,"a",13),t()()(),i(12,"mat-card",14)(13,"mat-card-header")(14,"mat-card-title"),n(15,"Public Profile"),t()(),i(16,"mat-card-content")(17,"div",15)(18,"div",16)(19,"span",17),n(20,"First Name"),t(),i(21,"span",18),n(22),t()(),i(23,"div",16)(24,"span",17),n(25,"Last Name"),t(),i(26,"span",18),n(27),t()(),i(28,"div",16)(29,"span",17),n(30,"Phone Number"),t(),i(31,"span",18),n(32),t()(),i(33,"div",16)(34,"span",17),n(35,"Email"),t(),i(36,"span",18),n(37),t()(),i(38,"div",16)(39,"span",17),n(40,"Username"),t(),i(41,"span",18),n(42),t()(),i(43,"div",16)(44,"span",17),n(45,"Status"),t(),i(46,"mat-chip"),n(47),t()()()()()()),r&2){let e,a,l,d,E,U,y,O,k,N,A,s=m();o(),_(s.canToggleStatus()?1:-1),o(4),_((e=s.user())!=null&&e.imageUrl?5:6),o(3),z("",(a=s.user())==null?null:a.firstName," ",(a=s.user())==null?null:a.lastName,""),o(2),c((l=s.user())==null?null:l.email),o(),_((d=s.user())!=null&&d.imageUrl?11:-1),o(11),c(((E=s.user())==null?null:E.firstName)||"-"),o(5),c(((U=s.user())==null?null:U.lastName)||"-"),o(5),c(((y=s.user())==null?null:y.phoneNumber)||"-"),o(5),c(((O=s.user())==null?null:O.email)||"-"),o(5),c(((k=s.user())==null?null:k.userName)||"-"),o(4),V((N=s.user())!=null&&N.isActive?"status-active":"status-inactive"),o(),P(" ",(A=s.user())!=null&&A.isActive?"Active":"Inactive"," ")}}var He=(()=>{class r{route=p(D);router=p($);notification=p(se);userService=p(ce);permissionService=p(de);user=x(null);isLoading=x(!0);activeStatus=x(!1);title=b(()=>{let e=this.user();return e?`${e.firstName} ${e.lastName}'s Profile`:"User Profile"});canToggleStatus=b(()=>this.permissionService.canUpdate(me.Users));ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&this.loadUser(e)}loadUser(e){this.isLoading.set(!0),this.userService.getUser(e).subscribe({next:a=>{this.user.set(a),this.activeStatus.set(a.isActive),this.isLoading.set(!1)},error:()=>{this.notification.error("Failed to load user profile"),this.isLoading.set(!1),this.user.set({id:e,firstName:"John",lastName:"Doe",email:"john.doe@example.com",userName:"johndoe",phoneNumber:"+1234567890",isActive:!0,emailConfirmed:!0}),this.activeStatus.set(!0)}})}onStatusChange(e){this.activeStatus.set(e)}saveStatus(){let e=this.user();e&&this.userService.toggleUserStatus(e.id,this.activeStatus()).subscribe({next:()=>{this.user.update(a=>a?w(I({},a),{isActive:this.activeStatus()}):null),this.notification.success("User status updated"),this.router.navigate(["/identity/users"])},error:()=>{this.notification.error("Failed to update user status")}})}getInitials(){let e=this.user();return e?`${e.firstName?.charAt(0)||""}${e.lastName?.charAt(0)||""}`.toUpperCase():""}getAvatarColor(){let e=["#f87171","#fb923c","#fbbf24","#a3e635","#34d399","#22d3d8","#60a5fa","#a78bfa","#f472b6","#e879f9"],l=((this.user()?.firstName||"").charCodeAt(0)||0)%e.length;return e[l]}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=T({type:r,selectors:[["app-user-profile"]],standalone:!0,features:[F],decls:8,vars:3,consts:[[1,"profile-container"],["icon","person",3,"title","subtitle"],["mat-stroked-button","","routerLink","/identity/users"],[1,"loading"],[1,"profile-grid"],["diameter","48"],["appearance","outlined",1,"admin-card"],["appearance","outlined",1,"avatar-card"],[1,"avatar-section"],["alt","Profile",1,"avatar-image",3,"src"],[1,"avatar-placeholder",3,"background-color"],[1,"user-name"],[1,"user-email"],["mat-stroked-button","","target","_blank",3,"href"],["appearance","outlined",1,"details-card"],[1,"details-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"admin-controls"],["color","primary",3,"change","checked"],["color","accent",3,"checked","disabled"],["mat-raised-button","","color","primary",3,"click"],[1,"avatar-placeholder"]],template:function(a,l){if(a&1&&(i(0,"div",0)(1,"app-page-header",1)(2,"button",2)(3,"mat-icon"),n(4,"arrow_back"),t(),n(5," Back to Users "),t()(),g(6,fe,2,0,"div",3)(7,Ce,48,14,"div",4),t()),a&2){let d;o(),u("title",l.title())("subtitle",((d=l.user())==null?null:d.email)||""),o(5),_(l.isLoading()?6:l.user()?7:-1)}},dependencies:[R,H,B,ie,X,Z,te,ee,Y,Q,K,G,q,J,oe,re,ae,ne,W,ue,pe,le],styles:[".profile-container[_ngcontent-%COMP%]{padding:24px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.profile-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:24px}.admin-card[_ngcontent-%COMP%]{grid-column:1/-1}.admin-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px;padding:16px 0}.avatar-card[_ngcontent-%COMP%]{grid-row:span 1}.avatar-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px;text-align:center}.avatar-image[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:8px;object-fit:cover;margin-bottom:16px}.avatar-placeholder[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:48px;font-weight:500;color:#fff;margin-bottom:16px}.user-name[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500}.user-email[_ngcontent-%COMP%]{margin:4px 0 16px;color:var(--text-secondary)}.details-card[_ngcontent-%COMP%]{grid-column:2}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px;padding:16px 0}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);font-weight:500}.detail-value[_ngcontent-%COMP%]{font-size:14px}.status-active[_ngcontent-%COMP%]{background:#dcfce7!important;color:#166534!important}.status-inactive[_ngcontent-%COMP%]{background:#fee2e2!important;color:#991b1b!important}@media (max-width: 768px){.profile-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.avatar-card[_ngcontent-%COMP%], .details-card[_ngcontent-%COMP%]{grid-column:1}.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.admin-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"]})}return r})();export{He as UserProfileComponent};
