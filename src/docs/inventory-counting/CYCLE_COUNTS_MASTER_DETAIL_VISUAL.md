# Cycle Counts Master-Detail Pattern - Visual Guide

## ğŸ¯ Master-Detail Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MASTER: Cycle Counts                         â”‚
â”‚                     (CycleCounts.razor)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Search & Filter Section                              â”‚     â”‚
â”‚  â”‚  â€¢ Warehouse Dropdown                                 â”‚     â”‚
â”‚  â”‚  â€¢ Status Filter (Scheduled/InProgress/etc.)         â”‚     â”‚
â”‚  â”‚  â€¢ Count Type Filter (Full/Partial/ABC/Random)       â”‚     â”‚
â”‚  â”‚  â€¢ Date Range Filters                                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Cycle Count Table (EntityTable)                      â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ Count â”‚ Warehouse â”‚Date â”‚ Status â”‚ Type â”‚ Items â”‚ Varâ”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚CC-001 â”‚ Main WH   â”‚11/10â”‚ Active â”‚ Full â”‚ 5/10  â”‚ 2  â”‚ â‹®   â”‚
â”‚  â”‚CC-002 â”‚ East WH   â”‚11/09â”‚Completeâ”‚ ABC  â”‚ 10/10 â”‚ 0  â”‚ â‹®   â”‚
â”‚  â”‚CC-003 â”‚ West WH   â”‚11/08â”‚Progressâ”‚Randomâ”‚ 3/7   â”‚ -  â”‚ â‹®   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜     â”‚
â”‚                                                            â”‚     â”‚
â”‚                                                            â–¼     â”‚
â”‚                                                    Context Menu  â”‚
â”‚                                                    â€¢ View Detailsâ”‚
â”‚                                                    â€¢ Start Count â”‚
â”‚                                                    â€¢ Complete    â”‚
â”‚                                                    â€¢ Reconcile   â”‚
â”‚                                                    â€¢ Cancel      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Click "View Details"
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               DETAIL: Cycle Count Details Dialog                â”‚
â”‚              (CycleCountDetailsDialog.razor)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Master Information Section                           â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ Count Number:     â”‚ CC-001                            â”‚     â”‚
â”‚  â”‚ Status:           â”‚ [InProgress] ğŸ”µ                   â”‚     â”‚
â”‚  â”‚ Warehouse:        â”‚ Main Warehouse                    â”‚     â”‚
â”‚  â”‚ Count Type:       â”‚ Full                              â”‚     â”‚
â”‚  â”‚ Scheduled Date:   â”‚ November 10, 2025                 â”‚     â”‚
â”‚  â”‚ Counter:          â”‚ John Doe                          â”‚     â”‚
â”‚  â”‚ Progress:         â”‚ 5 / 10 items counted              â”‚     â”‚
â”‚  â”‚                   â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 50%                  â”‚     â”‚
â”‚  â”‚ Variances:        â”‚ [2 items] âš ï¸                      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Count Items Section              [+ Add Item Button] â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ Item   â”‚ System â”‚ Counted â”‚ Variance â”‚ Recountâ”‚ Edit â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ Item A â”‚   50   â”‚   50    â”‚    0 âœ…  â”‚        â”‚  âœï¸  â”‚     â”‚
â”‚  â”‚ Item B â”‚  100   â”‚   98    â”‚   -2 âš ï¸  â”‚   âš ï¸   â”‚  âœï¸  â”‚     â”‚
â”‚  â”‚ Item C â”‚   25   â”‚   27    â”‚   +2 âš ï¸  â”‚   âš ï¸   â”‚  âœï¸  â”‚     â”‚
â”‚  â”‚ Item D â”‚   75   â”‚   75    â”‚    0 âœ…  â”‚        â”‚  âœï¸  â”‚     â”‚
â”‚  â”‚ Item E â”‚  200   â”‚  200    â”‚    0 âœ…  â”‚        â”‚  âœï¸  â”‚     â”‚
â”‚  â”‚ Item F â”‚   30   â”‚    -    â”‚    -     â”‚        â”‚  âœï¸  â”‚     â”‚
â”‚  â”‚ Item G â”‚   40   â”‚    -    â”‚    -     â”‚        â”‚  âœï¸  â”‚     â”‚
â”‚  â”‚ Item H â”‚   60   â”‚    -    â”‚    -     â”‚        â”‚  âœï¸  â”‚     â”‚
â”‚  â”‚ Item I â”‚   80   â”‚    -    â”‚    -     â”‚        â”‚  âœï¸  â”‚     â”‚
â”‚  â”‚ Item J â”‚   90   â”‚    -    â”‚    -     â”‚        â”‚  âœï¸  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚  [â„¹ï¸ Count all items and then complete the count]              â”‚
â”‚                                                                 â”‚
â”‚                                          [Close Button]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Interaction Flow

### 1. Creating a Cycle Count

```
User Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click [+New] â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Cycle Count Form â”‚
â”‚ â€¢ Count Number: CC-XXX  â”‚
â”‚ â€¢ Warehouse: [Select]   â”‚
â”‚ â€¢ Date: [Pick Date]     â”‚
â”‚ â€¢ Type: [Full/Partial]  â”‚
â”‚ â€¢ Counter Name: [Enter] â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Save] Button  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: Scheduled    â”‚
â”‚ Items: Empty         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Adding Items to Count

```
Detail Dialog Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click [+ Add Item]   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add Item Dialog             â”‚
â”‚ â€¢ Item: [Autocomplete]      â”‚
â”‚ â€¢ Location: [Optional]      â”‚
â”‚ â€¢ Expected Qty: [Display]   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Item Added to Count          â”‚
â”‚ â€¢ Shows in items table       â”‚
â”‚ â€¢ SystemQuantity populated   â”‚
â”‚ â€¢ CountedQuantity: null      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Recording Counts

```
Counting Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Start Count Action  â”‚
â”‚ Status â†’ InProgress â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ For Each Item:         â”‚
â”‚ Click [Edit] Button    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Record Count Dialog          â”‚
â”‚ â€¢ System Qty: 50 (Display)   â”‚
â”‚ â€¢ Counted Qty: [Input]       â”‚
â”‚ â€¢ Variance: Auto-calculated  â”‚
â”‚ â€¢ Notes: [Optional]          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Item Updated                   â”‚
â”‚ â€¢ CountedQuantity: Recorded    â”‚
â”‚ â€¢ VarianceQuantity: Calculated â”‚
â”‚ â€¢ RequiresRecount: Determined  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Completing Count

```
Completion Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½â”€â”€â”€â”
â”‚ All Items Counted    â”‚
â”‚ Progress: 10/10      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Complete Count Actionâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status â†’ Completed     â”‚
â”‚ Variances Calculated   â”‚
â”‚ Summary Generated      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Has Variances?         â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
   â”‚ Yes             â”‚ No
   â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Reconcile    â”‚  â”‚ Done âœ…  â”‚
â”‚ Available    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      CycleCount (Master)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Id: Guid                      â”‚
â”‚ â€¢ CountNumber: string           â”‚
â”‚ â€¢ WarehouseId: Guid (FK)        â”‚
â”‚ â€¢ CountDate: DateTime           â”‚
â”‚ â€¢ Status: string                â”‚
â”‚ â€¢ CountType: string             â”‚
â”‚ â€¢ TotalItems: int               â”‚
â”‚ â€¢ CountedItems: int             â”‚
â”‚ â€¢ VarianceItems: int            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N Relationship
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CycleCountItem (Detail)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Id: Guid                      â”‚
â”‚ â€¢ CycleCountId: Guid (FK) â—„â”€â”€â”€â”€â”¤ Master FK
â”‚ â€¢ ItemId: Guid (FK)             â”‚
â”‚ â€¢ SystemQuantity: int           â”‚
â”‚ â€¢ CountedQuantity: int?         â”‚
â”‚ â€¢ VarianceQuantity: int?        â”‚
â”‚ â€¢ CountDate: DateTime?          â”‚
â”‚ â€¢ CountedBy: string?            â”‚
â”‚ â€¢ RequiresRecount: bool         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ UI Component Hierarchy

```
CycleCounts.razor (Master Page)
â”‚
â”œâ”€â”€ EntityTable<CycleCountResponse>
â”‚   â”‚
â”‚   â”œâ”€â”€ AdvancedSearchContent
â”‚   â”‚   â”œâ”€â”€ MudSelect (Warehouse)
â”‚   â”‚   â”œâ”€â”€ MudSelect (Status)
â”‚   â”‚   â”œâ”€â”€ MudSelect (Count Type)
â”‚   â”‚   â””â”€â”€ MudDatePicker (Date Range)
â”‚   â”‚
â”‚   â”œâ”€â”€ DataColumns
â”‚   â”‚   â”œâ”€â”€ Count Number
â”‚   â”‚   â”œâ”€â”€ Warehouse Name
â”‚   â”‚   â”œâ”€â”€ Count Date
â”‚   â”‚   â”œâ”€â”€ Status Chip
â”‚   â”‚   â”œâ”€â”€ Count Type
â”‚   â”‚   â”œâ”€â”€ Items Progress
â”‚   â”‚   â””â”€â”€ Variance Count
â”‚   â”‚
â”‚   â”œâ”€â”€ ExtraActions (Context Menu)
â”‚   â”‚   â”œâ”€â”€ View Details â”€â”€â”€â”
â”‚   â”‚   â”œâ”€â”€ Start Count      â”‚
â”‚   â”‚   â”œâ”€â”€ Complete Count   â”‚
â”‚   â”‚   â”œâ”€â”€ Reconcile        â”‚
â”‚   â”‚   â””â”€â”€ Cancel Count     â”‚
â”‚   â”‚                        â”‚
â”‚   â””â”€â”€ EditFormContent      â”‚
â”‚       â”œâ”€â”€ Count Number     â”‚
â”‚       â”œâ”€â”€ Warehouse Select â”‚
â”‚       â”œâ”€â”€ Count Date       â”‚
â”‚       â”œâ”€â”€ Count Type       â”‚
â”‚       â””â”€â”€ Notes            â”‚
â”‚                            â”‚
â”‚                            â”‚ Opens Dialog
â”‚                            â–¼
â””â”€â”€ CycleCountDetailsDialog.razor (Detail Dialog)
    â”‚
    â”œâ”€â”€ Master Info Section
    â”‚   â”œâ”€â”€ MudSimpleTable
    â”‚   â”‚   â”œâ”€â”€ Count Number
    â”‚   â”‚   â”œâ”€â”€ Status Chip
    â”‚   â”‚   â”œâ”€â”€ Warehouse
    â”‚   â”‚   â”œâ”€â”€ Dates
    â”‚   â”‚   â”œâ”€â”€ Counter
    â”‚   â”‚   â””â”€â”€ Progress Bar
    â”‚   â”‚
    â”‚   â””â”€â”€ Variance Summary
    â”‚
    â”œâ”€â”€ Items Section
    â”‚   â”œâ”€â”€ [+ Add Item] Button â”€â”€â”
    â”‚   â”‚                          â”‚
    â”‚   â””â”€â”€ MudTable<Item>         â”‚
    â”‚       â”œâ”€â”€ Item Name          â”‚
    â”‚       â”œâ”€â”€ System Qty         â”‚
    â”‚       â”œâ”€â”€ Counted Qty        â”‚
    â”‚       â”œâ”€â”€ Variance (colored) â”‚
    â”‚       â”œâ”€â”€ Recount Icon       â”‚
    â”‚       â””â”€â”€ [Edit] Button â”€â”€â”  â”‚
    â”‚                            â”‚  â”‚
    â”œâ”€â”€ Status Alerts            â”‚  â”‚
    â””â”€â”€ [Close] Button           â”‚  â”‚
                                 â”‚  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚                           â”‚
        â–¼                           â”‚
    CycleCountRecordDialog         â”‚
    (Record Count)                 â”‚
    â€¢ Item Name (display)          â”‚
    â€¢ System Qty (display)         â”‚
    â€¢ Counted Qty (input)          â”‚
    â€¢ Variance (calculated)        â”‚
    â€¢ Notes (optional)             â”‚
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
    CycleCountAddItemDialog
    (Add Item to Count)
    â€¢ Item (autocomplete)
    â€¢ Location (optional)
    â€¢ Expected Qty (display)
```

## ğŸ”„ State Management

```
Cycle Count State Machine:

     [Create]
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚Scheduled â”‚ â—„â”€â”€â”€ Initial state
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â€¢ Can add items
        â”‚           â€¢ Can start count
        â”‚           â€¢ Can cancel
    [Start]
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚InProgressâ”‚      â€¢ Can add items
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â€¢ Can record counts
        â”‚           â€¢ Can complete
        â”‚           â€¢ Can cancel
   [Complete]
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚Completed â”‚      â€¢ Read-only
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â€¢ Can reconcile (if variances)
        â”‚
        â”‚ [Reconcile]
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Done âœ…  â”‚      â€¢ Final state
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Any state except Completed/Done:
        â”‚ [Cancel]
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚Cancelled â”‚      â€¢ Read-only
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â€¢ Terminal state
```

## ğŸ“ˆ Variance Visualization

```
Item Row Examples:

1. Perfect Match:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Item A â”‚   50   â”‚   50    â”‚    0 âœ…  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Green text, no recount needed

2. Under Count:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
   â”‚ Item B â”‚  100   â”‚   98    â”‚   -2 âš ï¸  â”‚ âš ï¸ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
   Red bold text, recount warning

3. Over Count:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
   â”‚ Item C â”‚   25   â”‚   27    â”‚   +2 âš ï¸  â”‚ âš ï¸ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
   Red bold text, recount warning

4. Not Counted Yet:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Item D â”‚   75   â”‚    -    â”‚    -     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Gray text, awaiting count
```

## ğŸ¯ Key Features Visual

### Progress Indicator:
```
5 / 10 items counted
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 50%
 â†‘ Red (< 50%)

7 / 10 items counted
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 70%
 â†‘ Yellow (50-99%)

10 / 10 items counted
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
 â†‘ Green (100%)
```

### Variance Summary:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Variances:           â”‚
â”‚ [2 items] âš ï¸         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†‘ Warning chip when variances detected
```

### Status Chips:
```
[Scheduled]     â† Gray
[InProgress]    â† Blue
[Completed]     â† Green
[Cancelled]     â† Red
```

---

**Document Type:** Visual Guide & Architecture  
**Created:** November 10, 2025  
**Purpose:** Illustrate master-detail pattern for Cycle Counts feature  
**Audience:** Developers implementing similar features

